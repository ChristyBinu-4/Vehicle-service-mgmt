{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
  .hero-img {
    margin-top: 0px; /* pulls image under navbar */
  }
  .brand-slider {
    overflow: hidden;
    position: relative;
  }
  .brand-track {
    display: flex;
    gap: 60px;
    animation: scroll-left 25s linear infinite;
  }
  #stats h1 {
    font-size: 2.5rem;
    margin: 0;
    display: inline-block;
  }
  #stats p {
    font-size: .9rem;
    margin-top: .5rem;
  }
  .plus {
    margin-left: 4px;
    color: #ffc107;
    font-weight: 700;
  }
  .login-buttons-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 100px 0;
    margin-top: -80px;
  }
  .login-card {
    background: white;
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%;
  }
  .login-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 50px rgba(0,0,0,0.3);
  }
  .login-icon {
    font-size: 4rem;
    margin-bottom: 20px;
  }
  .btn-login {
    padding: 15px 40px;
    font-size: 1.2rem;
    font-weight: 600;
    border-radius: 50px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .btn-user-login {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    color: white;
  }
  .btn-user-login:hover {
    background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    transform: scale(1.05);
    color: white;
  }
  .btn-servicer-login {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    border: none;
    color: white;
  }
  .btn-servicer-login:hover {
    background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%);
    transform: scale(1.05);
    color: white;
  }
</style>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const counters = document.querySelectorAll('.count');
  if (!('IntersectionObserver' in window)) {
    counters.forEach(c => runCounter(c));
    return;
  }
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.45
  };
  let observed = new Set();
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const section = entry.target.closest('#stats');
        if (section && !observed.has(section)) {
          observed.add(section);
          const inSection = section.querySelectorAll('.count');
          inSection.forEach(c => runCounter(c));
        }
      }
    });
  }, observerOptions);
  const statsSection = document.querySelector('#stats');
  if (statsSection) observer.observe(statsSection);
  function runCounter(el) {
    if (el.dataset.started === 'true') return;
    el.dataset.started = 'true';
    const target = parseInt(el.getAttribute('data-target')) || 0;
    const duration = parseInt(el.getAttribute('data-duration')) || 1500;
    const startTime = performance.now();
    const startVal = 0;
    function step(now) {
      const progress = Math.min((now - startTime) / duration, 1);
      const eased = 1 - (1 - progress) * (1 - progress);
      const current = Math.floor(startVal + (target - startVal) * eased);
      el.innerText = current;
      if (progress < 1) {
        requestAnimationFrame(step);
      } else {
        el.innerText = target; // ensure exact final value
      }
    }
    requestAnimationFrame(step);
  }
});
</script>

<!-- Hero Section with Login Buttons -->
<section class="login-buttons-section">
  <div class="container">
    <div class="row justify-content-center text-center mb-5">
      <div class="col-lg-10">
        <h1 class="text-white display-3 fw-bold mb-3">Welcome to CARVANTA</h1>
        <p class="text-white lead mb-5">Your trusted partner for vehicle maintenance and service management</p>
      </div>
    </div>
    <div class="row g-4 justify-content-center">
      <div class="col-lg-5 col-md-6">
        <div class="login-card text-center">
          <i class="bi bi-person-circle login-icon text-primary"></i>
          <h3 class="fw-bold mb-3">User Login</h3>
          <p class="text-muted mb-4">Access your account to book services, track your vehicle maintenance, and manage your appointments.</p>
          <a href="{% url 'login_page' %}" class="btn btn-login btn-user-login w-100">Login as User</a>
        </div>
      </div>
      <div class="col-lg-5 col-md-6">
        <div class="login-card text-center">
          <i class="bi bi-tools login-icon text-danger"></i>
          <h3 class="fw-bold mb-3">Servicer Login</h3>
          <p class="text-muted mb-4">Manage your service center, view bookings, update work progress, and serve your customers better.</p>
          <a href="{% url 'servicer_login' %}" class="btn btn-login btn-servicer-login w-100">Login as Servicer</a>
        </div>
      </div>
    </div>
  </div>
</section>
{% if system_settings.landing_hero_image %}
<img src="{{ system_settings.landing_hero_image.url }}" class="d-block w-100 hero-img" alt="Hero Image" style="height:80vh; object-fit:cover;">
{% else %}
<img src="{% static 'body_img.png' %}" class="d-block w-99 hero-img" alt="Hero Image" style="height:80vh; object-fit:cover;">
{% endif %}

<section id="about" class="py-5 bg-light">
  <div class="container text-center">
    <h2 class="fw-bold mb-3">We Provide the World's Best Car Service</h2>
    <p class="text-muted mb-4">
      Our mission is to ensure your vehicle's performance, safety, and reliability.
      With certified experts and years of experience, we keep your car running like new.
    </p>
    <div class="row mt-4">
      <div class="col-md-4 mb-4">
        <div class="p-4 bg-white shadow-sm rounded h-100">
          <i class="bi bi-people-fill fs-1 text-primary mb-3"></i>
          <h5 class="fw-bold text-dark mb-2">Professional Team</h5>
          <p class="text-muted">Certified mechanics with proven expertise and dedication.</p>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="p-4 bg-white shadow-sm rounded h-100">
          <i class="bi bi-tools fs-1 text-danger mb-3"></i>
          <h5 class="fw-bold text-dark mb-2">Fast Car Service</h5>
          <p class="text-muted">Quick, efficient repairs to get you back on the road faster.</p>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="p-4 bg-white shadow-sm rounded h-100">
          <i class="bi bi-cash-stack fs-1 text-success mb-3"></i>
          <h5 class="fw-bold text-dark mb-2">Affordable Pricing</h5>
          <p class="text-muted">Fair pricing and transparent quotes with no hidden fees.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="stats" class="py-5 text-center text-dark">
  <div class="container">
    <h2 class="fw-bold mb-5">Our Achievements</h2>
    <div class="row">
      <div class="col-6 col-md-3 mb-4">
        <h1 class="fw-bold">
          <span class="text-primary count" data-target="20" data-duration="1500">0</span><span class="plus text-primary">+</span>
        </h1>
        <p class="text-secondary">EMPLOYEES</p>
      </div>
      <div class="col-6 col-md-3 mb-4">
        <h1 class="fw-bold">
          <span class="text-primary count" data-target="100" data-duration="1600">0</span><span class="plus text-primary">+</span>
        </h1>
        <p class="text-secondary">HAPPY CLIENTS</p>
      </div>
      <div class="col-6 col-md-3 mb-4">
        <h1 class="fw-bold">
          <span class="text-primary count" data-target="200" data-duration="1700">0</span><span class="plus text-primary">+</span>
        </h1>
        <p class="text-secondary">COMPLETED SERVICES</p>
      </div>
      <div class="col-6 col-md-3 mb-4">
        <h1 class="fw-bold">
          <span class="text-primary count" data-target="5" data-duration="1200">0</span>
        </h1>
        <p class="text-secondary">YEARS OF EXPERIENCE</p>
      </div>
    </div>
  </div>
</section>

<section id="process" class="py-5 text-center text-white">
  <div class="container">
    <h2 class="fw-bold mb-5 text-dark">Our Working Process</h2>
    <div class="row justify-content-center align-items-center position-relative">
      <div class="col-md-2 mb-4">
        <div class="p-4 bg-mute rounded-4 shadow-sm h-100">
          <i class="bi bi-calendar2-check display-5 text-primary mb-3"></i>
          <h5 class="fw-bold text-primary">1. Appointment</h5>
          <p class="small text-dark">Book your service online on your own smartphone.</p>
        </div>
      </div>
      <div class="col-md-1 d-none d-md-block">
        <i class="bi bi-arrow-right-circle-fill display-5 text-warning"></i>
      </div>
      <div class="col-md-2 mb-4">
        <div class="p-4 bg-mute rounded-4 shadow-sm h-100">
          <i class="bi bi-gear-wide-connected display-5 text-info mb-3"></i>
          <h5 class="fw-bold text-info">2. Diagnostics</h5>
          <p class="small text-dark">We identify your vehicle's issues precisely.</p>
        </div>
      </div>
      <div class="col-md-1 d-none d-md-block">
        <i class="bi bi-arrow-right-circle-fill display-5 text-warning"></i>
      </div>
      <div class="col-md-2 mb-4">
        <div class="p-4 bg-mute rounded-4 shadow-sm h-100">
          <i class="bi bi-tools display-5 text-danger mb-3"></i>
          <h5 class="fw-bold text-danger">3. Repair</h5>
          <p class="small text-dark">Our experts fix the issue using modern tools.</p>
        </div>
      </div>
      <div class="col-md-1 d-none d-md-block">
        <i class="bi bi-arrow-right-circle-fill display-5 text-warning"></i>
      </div>
      <div class="col-md-2 mb-4">
        <div class="p-4 bg-mute rounded-4 shadow-sm h-100">
          <i class="bi bi-shield-check display-5 text-success mb-3"></i>
          <h5 class="fw-bold text-success">4. Quality Check</h5>
          <p class="small text-dark">Final inspection ensures perfection.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="py-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6 mb-4 mb-md-0">
        {% if system_settings.landing_service_image %}
        <img src="{{ system_settings.landing_service_image.url }}" class="img-fluid rounded shadow" alt="Mechanics">
        {% else %}
        <img src="{% static 'service_1.png' %}" class="img-fluid rounded shadow" alt="Mechanics">
        {% endif %}
      </div>
      <div class="col-md-6">
        <h2 class="fw-bold">Why Choose Us?</h2>
        <p class="text-muted">We focus on transparency, trust, and top-tier service quality. Our certified team uses advanced diagnostic systems and premium parts to ensure your car performs at its best.</p>
        <ul class="list-unstyled">
          <li>✔ Experienced Technicians</li>
          <li>✔ Quality Parts and Equipment</li>
          <li>✔ Transparent Pricing</li>
          <li>✔ Quick Turnaround Time</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section id="services" class="py-5 bg-light">
  <div class="container text-center">
    <h2 class="fw-bold mb-4">Our Services</h2>
    <div class="row">
      <div class="col-md-3 mb-4">
        <div class="p-4 bg-white rounded shadow-sm h-100">
          <i class="bi bi-gear-fill fs-1 text-primary mb-3"></i>
          <h5 class="fw-bold text-primary">Engine Repair</h5>
          <p class="text-muted mb-0">Comprehensive diagnostics, tuning, and engine rebuilding to restore peak performance and efficiency.</p>
        </div>
      </div>
      <div class="col-md-3 mb-4">
        <div class="p-4 bg-white rounded shadow-sm h-100">
          <i class="bi bi-speedometer fs-1 text-success mb-3"></i>
          <h5 class="fw-bold text-success">Transmission</h5>
          <p class="text-muted mb-0">Expert transmission maintenance and repair ensuring smooth gear shifts and power delivery.</p>
        </div>
      </div>
      <div class="col-md-3 mb-4">
        <div class="p-4 bg-white rounded shadow-sm h-100">
          <i class="bi bi-car-front-fill fs-1 text-danger mb-3"></i>
          <h5 class="fw-bold text-danger">Brake Service</h5>
          <p class="text-muted mb-0">Professional brake inspection, pad replacement, and system upgrades for enhanced safety.</p>
        </div>
      </div>
      <div class="col-md-3 mb-4">
        <div class="p-4 bg-white rounded shadow-sm h-100">
          <i class="bi bi-pc-display-horizontal fs-1 text-warning mb-3"></i>
          <h5 class="fw-bold text-warning">Diagnostics</h5>
          <p class="text-muted mb-0">Advanced computerized checks to detect and fix performance issues efficiently.</p>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
